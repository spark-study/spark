# 2장 RDD

## RDD

 * **RDD (Resilient Distributed Datasets)**
   * 문자 그대로 회복력을 가진 분산 데이터셋
   * RDD는 복원력을 위햇 읽기만 가능한 불변한 객체
   * RDD 데이터는 클러스터를 구성하는 여러 서버에 나누어 저장이 되며, 스파크는 파티션 단위로 관리(HDFS에서의 블록이 하나의 파티션으로 구성)
  
 * **Job과 Executor**
   * 각 스파크 프로그램을 실행하는 것을 job을 실행한다고 함
   * 클러스터에서 병렬로 처리되는데, 각 서버마다 executor라는 프로세스가 각자 할당된 파티션을 처리
  
 * **드라이버 프로그램**
   * 잡을 실행하는 프로그램
   * POJO, 메인함수를 가지고 있는 프로그램
   * 정확하게는, 스파크 컨텍스트를 생성하고, 인스턴스를 포함하고 있는프로그램
  
 * 트랜스포메이션, 액션
   * 1장 참조
  
 * **지연동작과 최적화**
   * RDD의 데이터 로딩 방식은 Lazy 컨셉을 사용
   * 실제 파일이 메모리에 올라가는 시점 or 메모리에서 연산을 시작하는 시점은 action을 이용할 때만 올라가게 됨
  
 * RDD에서는 데이터 타입에 따른 다양한 연산 메소드를 제공
   * 특별한 데이터 유형에 대해 특화된 메소드를 제공함
  
## 스파크 컨텍스트
 * **스파크 컨텍스트**
   * 스파크 어플리케이션과 클러스터의 연결을 관리하는 객체
   * 모든 스파크 어플리케이션은 스파크 컨텍스트를 생성함
  
## RDD 기본 액션 및 트랜스포메이션
 * collect : RDD 데이터를 배열로 반환
 * count : RDD 데이터 개수
 * map : RDD 데이터에 map func 수행 
 * flatMap : 반환시 이터레이터로 반환
 * ... 많음..
 
## RDD에서 데이터 불러오는 법
 1. 텍스트 파일
 2. 오브젝트 파일 : 객체 직렬화(느림)
 3. 시퀀스 파일 : 키와 값으로 구성된 이진 파일 포멧
 
## 클러스터에서 공유 변수 사용
 * 하둡으로 치면 분산 캐시, 카운터
   1. 분산 캐시 : https://hadoop.apache.org/docs/r2.6.1/api/org/apache/hadoop/filecache/DistributedCache.html
   2. 카운터
   
 * 스파크는 브로드캐스트 변수와 어큐뮬레이터
   1. **브로드캐스트 변수** : 읽기 전용으로 스파크 잡이 실행되는 동안 모든 서버에서 공유하는 자원
   2. **어큐뮬레이터** : 쓰기 동작을 위한 것, 각 서버가 공유하는 쓰기 공간, 특정 이벤트의 수를 세거나 관찰하고 싶은 정보를 모아두는 등 사용
     * *주의
      *1. 어큐뮬레이터에 증가시키는 동작은 클러스터의 모든 처리 프로세스에서 가능 BUT 읽는 동작은 드라이버 프로그램 내에서만 가능(즉, 트랜스포메이션, 액션 연산 내부에서는 값만 증가 가능)
      *2. 특별한 목적이 없는 한 어큐뮬레이터는 액션 연산을 수행하는 메서드에서만 사용해야함 why? 트랜스포메이션 연산은 액션과 달리 잡 내에서 필요한 만큼 반복 실행이 될 수 있음)
 
